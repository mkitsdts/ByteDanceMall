# 抖音商城项目

## 功能需求

### 认证中心
- 分发身份令牌
- 续期身份令牌
- 校验身份令牌

### 用户服务
- 创建用户
- 登录
- 用户登出
- 删除用户
- 更新用户
- 获取用户身份信息

### 商品服务
- 创建商品
- 修改商品信息
- 删除商品
- 查询商品信息（单个商品、批量商品）

### 购物车服务
- 创建购物车
- 清空购物车
- 获取购物车信息

### 订单服务
- 创建订单
- 结算订单
- 修改订单信息
- 订单定时取消

### 支付
- 取消支付
- 定时取消支付
- 支付

## 功能模块

根据需求将整个项目拆分为如下多个模块
- 用户模块
- 认证模块
- 商品模块
- 购物车模块
- 支付模块
- 订单模块

## 技术选型

编程语言go，使用到的框架技术栈如下
- hertz 
- gorm 
- mysql 
- redis
- gRPC

## 架构设计

### 用户模块

需要实现的功能如下

- 创建用户 
需要的数据 用户名 、 密码 、 邮箱号 。 redis存储5分钟验证码，注册引入唯一id作主键，注册成功将数据转发给各个模块

- 登录 
需要的数据有 用户名 、 密码 ，将数据传递给验证模块，验证模块返回结果后返回认证模块生成的jwt信息给请求体

- 用户登出
注销对应jwt信息

- 删除用户
从数据库中删除对应信息，并通知其他模块

- 更新用户
主要是更换邮箱，更换密码。更换密码后要通知认证模块

- 获取用户身份信息
返回对应用户数据

### 认证模块

需要实现的功能如下

- 分发身份令牌 
验证，通过后生成jwt且保存到redis并返回给登录模块

- 续期身份令牌 
延长redis中jwt对应的时间

- 校验身份令牌 
验证jwt是否存在，并返回结果

### 商品模块

需要实现的功能如下

- 创建商品 
主要信息 商品发布者id，商品名称，商品数量，商品价格，用以搜索的商品id

- 修改商品信息 
主要修改需求是价格和数量，少部分名称

- 删除商品 
搜索id直接删除不解释

- 查询商品信息
（单个商品、批量商品）模糊搜素返回商品数组

### 购物车模块

需要实现的功能如下
- 添加商品
直接添加不解释

- 删减商品 
直接删除不解释

- 创建购物车
在用户注册时创建对应购物车

- 清空购物车
删除购物车内容

- 获取购物车信息
返回购物车内商品订单信息

### 支付模块

需要实现的功能如下
- 取消支付 
创建支付链接

- 定时取消支付
定时取消，redis通知

- 支付
调用支付平台的接口

### 订单模块

需要实现的功能如下
- 创建订单 
主要信息时商品id，交易双方id

- 结算订单 
标记订单状态

- 修改订单信息 
申请取消订单

- 订单定时取消 
未进行订单24小时关闭