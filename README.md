# 秒杀服务

## 需求分析

需要实现的功能

- 定时上线秒杀商品
- 秒杀抢购商品

## 流程设计

请求到达服务器 _ _ 服务器通过redis校验是否达到秒杀时间 _ _ 无需原子操作库存减1 _ _ 放入排队成功队列 
                    ｜                                  ｜
                    ｜_ _ 返回未达到秒杀时间请求            | _ _ 放入等待排队队列

获取抢购成功队列 _ _ 原子操作库存减去1 _ _ 抢购成功创建订单号 _ _ 检测支付情况 _ _ 超时未支付库存加1并依次消费前面队列
                    |
                    | _ _ 放入候补抢购队列

## 测试结果

docker 部署服务，在ghz压测下大概在 10000 左右qps，实际环境部署应该能到 15000 左右。考虑到用户资格校验等环节实际表现需要打折扣。